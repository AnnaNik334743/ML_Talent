# ML_Talent

### Задача:
Разработать алгоритм для структурирования информации в резюме кандидатов. 
По неструктурированным входным данным (резюме кандидатов в произвольном формате, чаще pdf или docx) нужно создать JSON-файл с чётко определенной структурой. Данный алгоритм позволит облегчить работу HR-специалистов.

### Структура решения:
Решение преимущественно состоит из двух блоков – блок извлечения информации из файлов и LLM-блок, позволяющий приводить полученную информацию из неструктурированного вида к структурированному (JSON). Эталонная структура представлена в файле gold.json.

![image](https://drive.google.com/uc?export=view&id=1NNuvWxviWRdhINff1vt2Tr9qPrEOtN5P)

### Стэк: 
python-docx, doc2docx, PyMuPDF + easyOCR + YOLO (Parsing); ChatGPT 3.5 (text generation); FastAPI + pydantic (Backend); Docker (Deploy).

### Особенности решения:
**Блок парсинга**

Наше решение позволяет работать с файлами различного формата, а именно с TXT, PDF, DOCX и DOC. Парсер позволяет работать со сложными случаями (отсканированные файлы; табличные данные) путём комбинации стандартных инструментов для парсинга, различных эвристик и технологии Optical Character Recognition. Парсер умеет извлекать не только текст, но и изображения. Для того, чтобы определить, является ли изображение фотографией кандидата, используется нейросетевая модель семейства YOLO. Для хранения изображений используется локальное хранилище, а также YandexCloud.

**Блок LLM**

В решении используется современная SOTA-модель от OpenAI ChatGPT 3.5. Была выбрана данная версия, а не ChatGPT 4, так как её использование обходится дешевле + существует возможность fine-tuning (дообучения модели под специфическую задачу). Модель была дообучена на 56 вручную размеченных резюме в течение двух эпох. Для бесшовного взаимодействия с API OpenAI используется прокси-сервер.  

**Интерфейс**

Интерфейс к сервису предоставляется посредством FastAPI. Его сильные стороны – простота использования, асинхронное исполнение кода, возможность структурирования кодовой базы.

Решение поддерживает английский и русский языки, ответ предоставляется на том же языке, на котором написано резюме.

### API (Application Program Interface): 

![image](https://drive.google.com/uc?export=view&id=11p-08kq4NfJho-KTk088rLUDBo5Gpzx8)

**/extract_text**

Извлекает текст из загруженного файла.

Принимает файл (DOC, DOCX, PDF, TXT), содержащий резюме.

Возвращает JSON-объект, содержащий извлеченный текст и метаданные.

**/parse_text**

Разбирает текст с помощью языковой модели.

Принимает текст резюме, подлежащий разбору, а также язык, на котором будет подан промпт для языковой модели (en/ru)..

Возвращает JSON-объект, содержащий структурированную извлеченную информацию.

**/parse_file**

Объединяет два вышеуказанных метода.

Принимает файл (DOC, DOCX, PDF, TXT), содержащий резюме, а также параметр prettify_result. Вывод содержит числа (для полей contact_type, education_type и т.д.), если для prettify_resul tустановлено значение false, в противном случае отображение будет содержать человекочитаемый текст.

Возвращает JSON-объект, содержащий извлеченную из резюме информацию в структурированном виде.

### Как запустить: 

### Планы на будущее:

* увеличение количества файловых форматов, поддерживаемых сервисом;
* поддержка локально развёртываемых LLM;
* поддержка подключения к таким сервисам, как YandexCloud, GoogleDrive и иным хранилищам данных для потоковой обработки большого количества резюме.

